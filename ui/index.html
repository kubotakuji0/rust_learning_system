<!DOCTYPE html>
<html lang="ja">
  
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="data:,"><!-- favicon 404 回避 -->
  <link rel="stylesheet" href="style.css" />

  <script>
    // Monaco のバージョン（必要ならここだけ変える）
    window.MONACO_VERSION = '0.45.0';
  </script>

  <!-- AMD loader -->
  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js"></script>

  <script>
    // Monaco のベースパス
    require.config({
      paths: {
        'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@' + window.MONACO_VERSION + '/min/vs'
      }
    });

    // Worker を Blob 経由で読み込む（CORS/パス問題回避）
    window.MonacoEnvironment = {
      getWorkerUrl: function () {
        const v = window.MONACO_VERSION;
        const code = `
          self.MonacoEnvironment = { baseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@${v}/min/' };
          importScripts('https://cdn.jsdelivr.net/npm/monaco-editor@${v}/min/vs/base/worker/workerMain.js');
        `;
        return URL.createObjectURL(new Blob([code], { type: 'text/javascript' }));
      }
    };
  </script>

  <!-- あなたの JS は最後に（defer で OK） -->
  <script src="script.js" defer></script>
</head>
<body>
  <header class="app-header">
    <h1 class="title">Rust 学習支援</h1>
  </header>

  <main class="layout">
    <section class="panel">
      <div class="panel-title-row">
        <h2 class="panel-title">▶ 問題</h2>
        <select id="problemSelect" class="select"></select>
      </div>
      <div id="problemDesc" class="problem-desc"></div>
    </section>

    <!-- ▼ 追加：エディター＋実行ボタン -->
    <section class="panel">
      <div class="panel-title-row">
        <h2 class="panel-title">▶ エディター</h2>
        <button id="runBtn" class="btn primary">実行</button>
      </div>
      <div id="editor" class="editor"></div>
    </section>
    <!-- ▲ 追加ここまで -->

    <section class="panel">
      <div class="panel-title-row">
        <h2 class="panel-title">▶ 出力</h2>
        <div id="status" class="badge badge-info">準備OK</div>
      </div>
      <pre id="output" class="output">ここに出力が表示されます</pre>
    </section>
  </main>
</body>
</html>
